Index: includes/specials/SpecialUpload.php
===================================================================
--- includes/specials/SpecialUpload.php	(revision 54846)
+++ includes/specials/SpecialUpload.php	(working copy)
@@ -1410,7 +1413,7 @@
 	 * @return bool true if the file contains something looking like embedded scripts
 	 */
 	function detectScript($file, $mime, $extension) {
-		global $wgAllowTitlesInSVG;
+		global $wgAllowTitlesInSVG, $wgForbiddenTagsInUploads;
 
 		#ugly hack: for text files, always look at the entire file.
 		#For binarie field, just check the first K.
@@ -1458,7 +1461,9 @@
 		* when served with a generic content-type.
 		*/
 
-		$tags = array(
+		$tags = $wgForbiddenTagsInUploads;
+		if (!$tags)
+			$tags = array(
 			'<body',
 			'<head',
 			'<html',   #also in safari
