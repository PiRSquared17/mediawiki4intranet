# HG changeset patch
# User Vitaliy Filippov <vitalif@yourcmc.ru>
# Date 1327949487 -14400
Bug 50009 - Show their modified text instead of latest saved on Save click to users who can't modify the page

diff -r 6b6371ec1416 -r 62a5603661f4 includes/EditPage.php
--- includes/EditPage.php
+++ includes/EditPage.php
@@ -406,7 +406,9 @@
 			$wgUser->spreadAnyEditBlock();
 
 			wfDebug( __METHOD__ . ": User can't edit\n" );
-			$content = $this->getContent( null );
+			$content = $this->textbox2 ? $this->textbox2 :
+				( $this->textbox1 ? $this->textbox1 : $this->getContent( false ) );
+
 			$content = $content === '' ? null : $content;
 			$this->readOnlyPage( $content, true, $permErrors, 'edit' );
 			wfProfileOut( __METHOD__ );
