# HG changeset patch
# User Vitaliy Filippov <vitali@st-filippov.office.custis.ru>
# Date 1279884996 -14400
Bug 63447, add hook for MediaWiki::preliminaryChecks()

diff -r 6b77a2bb86d2 -r 02ca46204a0f includes/Wiki.php
--- includes/Wiki.php
+++ includes/Wiki.php
@@ -142,6 +142,8 @@
 			// Do this above the read whitelist check for security...
 			$title = SpecialPage::getTitleFor( 'Search' );
 		}
+		if ( !wfRunHooks( 'MediaWikiPreliminaryChecks', array( &$title, &$output, $request ) ) )
+			return false;
 		# If the user is not logged in, the Namespace:title of the article must be in
 		# the Read array in order for the user to see it. (We have to check here to
 		# catch special pages etc. We check again in Article::view())
