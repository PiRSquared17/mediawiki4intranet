# HG changeset patch
# User Vitaliy Filippov <vitalif@yourcmc.ru>
# Date 1329482284 -14400
Bug 68935 - Vector skin fixes: allow SEARCH in sidebar, wider search in p-cactions

diff -r 2b1195378d97 -r 959a0148670e skins/Vector.php
--- skins/Vector.php
+++ skins/Vector.php
@@ -280,6 +280,31 @@
 			echo "\n<!-- {$name} -->\n";
 			switch( $name ) {
 				case 'SEARCH':
+					global $wgUseTwoButtonsSearchForm;
+?>
+<div class="portal" id="po-search">
+	<h5><label for="searchInput2"><?php $this->msg('search') ?></label></h5>
+	<div id="searchBody2" class="pBody">
+		<form action="<?php $this->text('wgScript') ?>" id="searchform2">
+			<input type='hidden' name="title" value="<?php $this->text('searchtitle') ?>"/>
+			<?php
+	echo Html::input( 'search',
+		isset( $this->data['search'] ) ? $this->data['search'] : '', 'search',
+		array(
+			'id' => 'searchInput2',
+			'title' => $this->skin->titleAttrib( 'search' ),
+			'accesskey' => $this->skin->accesskey( 'search' )
+		) ); ?>
+
+			<input type='submit' name="go" class="searchButton" id="searchGoButton2"	value="<?php $this->msg('searcharticle') ?>"<?php echo Xml::expandAttributes( Linker::tooltipAndAccesskeyAttribs( 'search-go' ) ); ?> /><?php if ($wgUseTwoButtonsSearchForm) { ?>&nbsp;
+			<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton2" value="<?php $this->msg('searchbutton') ?>"<?php echo Xml::expandAttributes( Linker::tooltipAndAccesskeyAttribs( 'search-fulltext' ) ); ?> /><?php } else { ?>
+
+			<div><a href="<?php $this->text('searchaction') ?>" rel="search"><?php $this->msg('powersearch-legend') ?></a></div><?php } ?>
+
+		</form>
+	</div>
+</div>
+<?php
 					break;
 				case 'TOOLBOX':
 					$this->renderPortal( 'tb', $this->getToolbox(), 'toolbox', 'SkinTemplateToolboxEnd' );
diff -r 2b1195378d97 -r 959a0148670e skins/vector/screen.css
--- skins/vector/screen.css
+++ skins/vector/screen.css
@@ -65,6 +65,35 @@
 	margin: 0;
 	padding: 0;
 }
+/*
+** Search portlet
+*/
+#po-search {
+	position: relative;
+	z-index: 3;
+}
+#po-search input.searchButton {
+	margin-top: 1px;
+	font-size: 80%;
+}
+#po-search #searchGoButton2 {
+	padding-left: .5em;
+	padding-right: .5em;
+	font-weight: bold;
+}
+#po-search #searchInput2 {
+	width: 10.9em;
+	margin: 0;
+	font-size: 80%;
+}
+#po-search .pBody {
+	padding: 0;
+	text-align: center;
+}
+#po-search #searchform2 div div {
+	margin-top: .4em;
+	font-size: 80%;
+}
 	/* Hide empty portlets */
 	div.emptyPortlet {
 		display: none;
@@ -361,9 +390,18 @@
 		margin: 0;
 		margin-top: 0.4em;
 	}
+	#p-search input {
+		width: 18em;
+	}
+	#p-search input#searchGoButton {
+		font-weight: bold;
+	}
+	#p-search input.searchButton {
+		width: auto;
+	}
 	div#simpleSearch {
 		display: block;
-		width: 14em;
+		width: 18em;
 		height: 1.4em;
 		margin-top: 0.65em;
 		position: relative;
@@ -453,7 +491,7 @@
 	left: 0;
 }
 	div#mw-panel div.portal {
-		padding-bottom: 1.5em;
+		padding-bottom: 1em;
 		direction: ltr;
 	}
 	div#mw-panel div.portal h5 {
