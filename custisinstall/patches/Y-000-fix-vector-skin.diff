# HG changeset patch
# User Vitaliy Filippov <vitalif@yourcmc.ru>
# Date 1328118394 -14400
Bug 68935 - Vector skin fixes: allow SEARCH in sidebar, wider search in p-cactions

diff -r 6b6371ec1416 -r c81fe77e0e95 skins/Vector.php
--- skins/Vector.php
+++ skins/Vector.php
@@ -280,6 +280,31 @@
 			echo "\n<!-- {$name} -->\n";
 			switch( $name ) {
 				case 'SEARCH':
+					global $wgUseTwoButtonsSearchForm;
+?>
+<div class="portal" id="po-search">
+	<h5><label for="searchInput2"><?php $this->msg('search') ?></label></h5>
+	<div id="searchBody2" class="pBody">
+		<form action="<?php $this->text('wgScript') ?>" id="searchform2">
+			<input type='hidden' name="title" value="<?php $this->text('searchtitle') ?>"/>
+			<?php
+	echo Html::input( 'search',
+		isset( $this->data['search'] ) ? $this->data['search'] : '', 'search',
+		array(
+			'id' => 'searchInput2',
+			'title' => $this->skin->titleAttrib( 'search' ),
+			'accesskey' => $this->skin->accesskey( 'search' )
+		) ); ?>
+
+			<input type='submit' name="go" class="searchButton" id="searchGoButton2"	value="<?php $this->msg('searcharticle') ?>"<?php echo Xml::expandAttributes( Linker::tooltipAndAccesskeyAttribs( 'search-go' ) ); ?> /><?php if ($wgUseTwoButtonsSearchForm) { ?>&nbsp;
+			<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton2" value="<?php $this->msg('searchbutton') ?>"<?php echo Xml::expandAttributes( Linker::tooltipAndAccesskeyAttribs( 'search-fulltext' ) ); ?> /><?php } else { ?>
+
+			<div><a href="<?php $this->text('searchaction') ?>" rel="search"><?php $this->msg('powersearch-legend') ?></a></div><?php } ?>
+
+		</form>
+	</div>
+</div>
+<?php
 					break;
 				case 'TOOLBOX':
 					$this->renderPortal( 'tb', $this->getToolbox(), 'toolbox', 'SkinTemplateToolboxEnd' );
