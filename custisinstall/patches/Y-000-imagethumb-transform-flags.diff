# HG changeset patch
# User Vitaliy Filippov <vitalif@yourcmc.ru>
# Date 1327949601 -14400
Bug 54081 - Add flags imagegallery=>true, imagehistory=>true to transform() params.
This allows extensions (FlvHandler) to decide whether to insert one code or another.

diff -r 6b6371ec1416 -r 2783efb36c55 includes/ImageGallery.php
--- includes/ImageGallery.php
+++ includes/ImageGallery.php
@@ -236,7 +236,8 @@
 
 		$params = array(
 			'width' => $this->mWidths,
-			'height' => $this->mHeights
+			'height' => $this->mHeights,
+			'imagegallery' => true,
 		);
 		# Output each image...
 		foreach ( $this->mImages as $pair ) {
diff -r 6b6371ec1416 -r 2783efb36c55 includes/ImagePage.php
--- includes/ImagePage.php
+++ includes/ImagePage.php
@@ -1041,6 +1041,7 @@
 			$params = array(
 				'width' => '120',
 				'height' => '120',
+				'imagehistory' => true,
 			);
 			$timestamp = wfTimestamp( TS_MW, $file->getTimestamp() );
 
