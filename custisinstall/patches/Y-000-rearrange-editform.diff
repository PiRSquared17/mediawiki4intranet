# HG changeset patch
# User Vitaliy Filippov <vitali@st-filippov.office.custis.ru>
# Date 1297176064 -10800
Bug 73311 - Rearrange edit form contents, remove copyright warnings
Bug 75186 - Move subpages by default

diff -r b11befdd7427 -r 396d0d0bdf1b includes/EditPage.php
--- includes/EditPage.php
+++ includes/EditPage.php
@@ -1304,6 +1304,12 @@
 		$this->showTosSummary();
 		$this->showEditTools();
 
+		if ( $this->isConflict )
+			$this->showConflict();
+		
+		$wgOut->addHTML( $this->editFormTextBottom );
+		$wgOut->addHTML( "</form>\n" );
+
 		$wgOut->addHTML( <<<HTML
 {$this->editFormTextAfterTools}
 <div class='templatesUsed'>
@@ -1315,11 +1321,6 @@
 HTML
 );
 
-		if ( $this->isConflict )
-			$this->showConflict();
-		
-		$wgOut->addHTML( $this->editFormTextBottom );
-		$wgOut->addHTML( "</form>\n" );
 		if ( !$wgUser->getOption( 'previewontop' ) ) {
 			$this->displayPreviewArea( $previewOutput, false );
 		}
@@ -1721,7 +1722,9 @@
 	}
 	
 	protected function getCopywarn() {
-		global $wgRightsText;
+		global $wgRightsText, $wgNoCopyrightWarnings;
+		if ( $wgNoCopyrightWarnings )
+			return '';
 		if ( $wgRightsText ) {
 			$copywarnMsg = array( 'copyrightwarning',
 				'[[' . wfMsgForContent( 'copyrightpage' ) . ']]',
diff -r b11befdd7427 -r 396d0d0bdf1b includes/specials/SpecialMovepage.php
--- includes/specials/SpecialMovepage.php
+++ includes/specials/SpecialMovepage.php
@@ -77,7 +77,7 @@
 			$this->fixRedirects = $wgRequest->getBool( 'wpFixRedirects', true );
 			$this->leaveRedirect = $wgRequest->getBool( 'wpLeaveRedirect', true );
 		}
-		$this->moveSubpages = $wgRequest->getBool( 'wpMovesubpages', false );
+		$this->moveSubpages = $wgRequest->getBool( 'wpMovesubpages', true );
 		$this->deleteAndMove = $wgRequest->getBool( 'wpDeleteAndMove' ) && $wgRequest->getBool( 'wpConfirm' );
 		$this->moveOverShared = $wgRequest->getBool( 'wpMoveOverSharedFile', false );
 		$this->watch = $wgRequest->getCheck( 'wpWatch' ) && $wgUser->isLoggedIn();
