# HG changeset patch
# User Vitaliy Filippov <vitalif@yourcmc.ru>
# Date 1327949498 -14400
Bug 73311 - Rearrange edit form contents, remove copyright warnings
Bug 75186 - Move subpages by default

diff -r 6b6371ec1416 -r ec169d37add8 includes/EditPage.php
--- includes/EditPage.php
+++ includes/EditPage.php
@@ -1513,6 +1513,12 @@
 		$this->showTosSummary();
 		$this->showEditTools();
 
+		if ( $this->isConflict )
+			$this->showConflict();
+		
+		$wgOut->addHTML( $this->editFormTextBottom );
+		$wgOut->addHTML( "</form>\n" );
+
 		$wgOut->addHTML( <<<HTML
 {$this->editFormTextAfterTools}
 <div class='templatesUsed'>
@@ -1524,11 +1530,6 @@
 HTML
 );
 
-		if ( $this->isConflict )
-			$this->showConflict();
-
-		$wgOut->addHTML( $this->editFormTextBottom );
-		$wgOut->addHTML( "</form>\n" );
 		if ( !$wgUser->getOption( 'previewontop' ) ) {
 			$this->displayPreviewArea( $previewOutput, false );
 		}
@@ -1943,7 +1944,9 @@
 	}
 
 	protected function getCopywarn() {
-		global $wgRightsText;
+		global $wgRightsText, $wgNoCopyrightWarnings;
+		if ( $wgNoCopyrightWarnings )
+			return '';
 		if ( $wgRightsText ) {
 			$copywarnMsg = array( 'copyrightwarning',
 				'[[' . wfMsgForContent( 'copyrightpage' ) . ']]',
diff -r 6b6371ec1416 -r ec169d37add8 includes/specials/SpecialMovepage.php
--- includes/specials/SpecialMovepage.php
+++ includes/specials/SpecialMovepage.php
@@ -86,7 +86,7 @@
 		$this->moveTalk = $wgRequest->getBool( 'wpMovetalk', $def );
 		$this->fixRedirects = $wgRequest->getBool( 'wpFixRedirects', $def );
 		$this->leaveRedirect = $wgRequest->getBool( 'wpLeaveRedirect', $def );
-		$this->moveSubpages = $wgRequest->getBool( 'wpMovesubpages', false );
+		$this->moveSubpages = $wgRequest->getBool( 'wpMovesubpages', true );
 		$this->deleteAndMove = $wgRequest->getBool( 'wpDeleteAndMove' ) && $wgRequest->getBool( 'wpConfirm' );
 		$this->moveOverShared = $wgRequest->getBool( 'wpMoveOverSharedFile', false );
 		$this->watch = $wgRequest->getCheck( 'wpWatch' ) && $wgUser->isLoggedIn();
