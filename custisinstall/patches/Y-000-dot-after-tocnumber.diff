# HG changeset patch
# User Vitaliy Filippov <vitalif@yourcmc.ru>
# Date 1327949207 -14400
Bug 52772 - Optional dots (.) after TOC item numbers

diff -r 6b6371ec1416 -r 0dd576c2f1a3 includes/DefaultSettings.php
--- includes/DefaultSettings.php
+++ includes/DefaultSettings.php
@@ -2854,6 +2854,11 @@
 );
 
 /**
+ * If true, add '.' TOC numbers have "x.x.x." format instead of just "x.x.x"
+ */
+$wgDotAfterTocnumber = false;
+
+/**
  * If true, removes (substitutes) templates in "~~~~" signatures.
  */
 $wgCleanSignatures = true;
diff -r 6b6371ec1416 -r 0dd576c2f1a3 includes/parser/Parser.php
--- includes/parser/Parser.php
+++ includes/parser/Parser.php
@@ -3757,7 +3757,7 @@
 	 * @private
 	 */
 	function formatHeadings( $text, $origText, $isMain=true ) {
-		global $wgMaxTocLevel, $wgHtml5, $wgExperimentalHtmlIds;
+		global $wgMaxTocLevel, $wgHtml5, $wgExperimentalHtmlIds, $wgDotAfterTocnumber;
 
 		# Inhibit editsection links if requested in the page
 		if ( isset( $this->mDoubleUnderscores['noeditsection'] ) ) {
@@ -3898,6 +3898,8 @@
 					$dot = 1;
 				}
 			}
+			if ( $wgDotAfterTocnumber )
+				$numbering .= '.';
 
 			# The safe header is a version of the header text safe to use for links
 			# Avoid insertion of weird stuff like <math> by expanding the relevant sections
